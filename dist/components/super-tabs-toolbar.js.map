{"version":3,"file":"super-tabs-toolbar.js","sourceRoot":"","sources":["../../src/components/super-tabs-toolbar.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  AfterViewInit,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnDestroy,\r\n  Output,\r\n  QueryList,\r\n  Renderer2,\r\n  ViewChild,\r\n  ViewChildren,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\nimport { Platform } from 'ionic-angular';\r\n\r\nimport { SuperTabsPanGesture } from '../super-tabs-pan-gesture';\r\nimport { SuperTabButtonComponent } from './super-tab-button';\r\nimport { SuperTabsConfig } from './super-tabs';\r\n\r\n@Component({\r\n  selector: 'super-tabs-toolbar',\r\n  template: `\r\n    <ion-toolbar [color]=\"color\" mode=\"md\" [class.scroll-tabs]=\"scrollTabs\">\r\n      <div class=\"tab-buttons-container\" #tabButtonsContainer>\r\n        <div *ngIf=\"tabsPlacement === 'bottom'\" class=\"indicator {{ 'button-md-' + indicatorColor }}\" #indicator></div>\r\n        <div class=\"tab-buttons\" #tabButtons>\r\n          <super-tab-button *ngFor=\"let tab of tabs; let i = index\" (select)=\"onTabSelect(i)\" [title]=\"tab.title\"\r\n                            [icon]=\"tab.icon\" [badge]=\"tab.badge\" [selected]=\"selectedTab === i\" [color]=\"tabsColor\"\r\n                            [badgeColor]=\"badgeColor\"></super-tab-button>\r\n        </div>\r\n        <div *ngIf=\"tabsPlacement === 'top'\" class=\"indicator {{ 'button-md-' + indicatorColor }}\" #indicator></div>\r\n      </div>\r\n    </ion-toolbar>\r\n  `,\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SuperTabsToolbar implements AfterViewInit, OnDestroy {\r\n  @Input() color = '';\r\n\r\n  @Input() tabsColor = '';\r\n\r\n  @Input() badgeColor = '';\r\n\r\n  @Input() scrollTabs = false;\r\n\r\n  @Input() indicatorColor = '';\r\n\r\n  @Input() selectedTab = 0;\r\n\r\n  @Input() config: SuperTabsConfig;\r\n\r\n  @Input() tabsPlacement: string;\r\n\r\n  indicatorPosition = 0;\r\n\r\n  indicatorWidth = 0;\r\n\r\n  @Output() tabSelect: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  @ViewChildren(SuperTabButtonComponent)\r\n  private tabButtons: QueryList<SuperTabButtonComponent>;\r\n\r\n  @ViewChild('tabButtonsContainer') private tabButtonsContainer: ElementRef;\r\n\r\n  @ViewChild('indicator') private indicator: ElementRef;\r\n\r\n  @ViewChild('tabButtons') private tabButtonsBar: ElementRef;\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  segmentPosition = 0;\r\n\r\n  /**\r\n   * The width of each button\r\n   */\r\n  segmentButtonWidths: number[] = [];\r\n\r\n  /**\r\n   * The segment width\r\n   */\r\n  segmentWidth = 0;\r\n\r\n  tabs: any[] = [];\r\n\r\n  private gesture: SuperTabsPanGesture;\r\n\r\n  private animationState = {\r\n    indicator: false,\r\n    segment: false\r\n  };\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private plt: Platform,\r\n    private rnd: Renderer2\r\n  ) {}\r\n\r\n  get height(): number {\r\n    if (!this.el || !this.el.nativeElement) {\r\n      return 0;\r\n    }\r\n    return this.el.nativeElement.getBoundingClientRect().height;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.gesture = new SuperTabsPanGesture(\r\n      this.plt,\r\n      this.config,\r\n      this.tabButtonsContainer.nativeElement,\r\n      this.rnd\r\n    );\r\n    this.gesture.onMove = (delta: number) => {\r\n      let newCPos = this.segmentPosition + delta;\r\n\r\n      const mw: number = this.el.nativeElement.offsetWidth,\r\n        cw: number = this.segmentWidth;\r\n\r\n      newCPos = Math.max(0, Math.min(newCPos, cw - mw));\r\n      this.setSegmentPosition(newCPos);\r\n    };\r\n\r\n    if (this.scrollTabs) {\r\n      this.plt.timeout(() => {\r\n        this.indexSegmentButtonWidths();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.gesture && this.gesture.destroy();\r\n  }\r\n\r\n  onTabSelect(index: number) {\r\n    this.tabSelect.emit(index);\r\n  }\r\n\r\n  alignIndicator(position: number, width: number, animate?: boolean) {\r\n    this.setIndicatorProperties(width, position, animate);\r\n  }\r\n\r\n  setIndicatorPosition(position: number, animate?: boolean) {\r\n    this.setIndicatorProperties(this.indicatorWidth, position, animate);\r\n  }\r\n\r\n  setIndicatorWidth(width: number, animate?: boolean) {\r\n    this.setIndicatorProperties(width, this.indicatorPosition, animate);\r\n  }\r\n\r\n  setIndicatorProperties(width: number, position: number, animate?: boolean) {\r\n    this.indicatorWidth = width;\r\n    this.indicatorPosition = position;\r\n    const scale = width / 100;\r\n    this.toggleAnimation('indicator', animate);\r\n    this.rnd.setStyle(\r\n      this.indicator.nativeElement,\r\n      this.plt.Css.transform,\r\n      'translate3d(' +\r\n        (position - this.segmentPosition) +\r\n        'px, 0, 0) scale3d(' +\r\n        scale +\r\n        ', 1, 1)'\r\n    );\r\n  }\r\n\r\n  setSegmentPosition(position: number, animate?: boolean) {\r\n    this.segmentPosition = position;\r\n    this.toggleAnimation('segment', animate);\r\n    this.rnd.setStyle(\r\n      this.tabButtonsBar.nativeElement,\r\n      this.plt.Css.transform,\r\n      `translate3d(${-1 * position}px,0,0)`\r\n    );\r\n    this.setIndicatorPosition(this.indicatorPosition, animate);\r\n  }\r\n\r\n  /**\r\n   * Enables/disables animation\r\n   * @param el\r\n   * @param animate\r\n   */\r\n  private toggleAnimation(el: 'indicator' | 'segment', animate: boolean) {\r\n    if (!this.config || this.config.transitionDuration === 0) {\r\n      return;\r\n    }\r\n\r\n    // only change style if the value changed\r\n    if (this.animationState[el] === animate) {\r\n      return;\r\n    }\r\n\r\n    this.animationState[el] = animate;\r\n\r\n    const _el: HTMLElement =\r\n      el === 'indicator'\r\n        ? this.indicator.nativeElement\r\n        : this.tabButtonsBar.nativeElement;\r\n    const value: string = animate\r\n      ? `all ${this.config.transitionDuration}ms ${this.config.transitionEase}`\r\n      : 'initial';\r\n\r\n    this.rnd.setStyle(_el, this.plt.Css.transition, value);\r\n  }\r\n\r\n  /**\r\n   * Indexes the segment button widths\r\n   */\r\n  indexSegmentButtonWidths() {\r\n    const index = [];\r\n    let total = 0;\r\n\r\n    this.tabButtons.forEach((btn: SuperTabButtonComponent, i: number) => {\r\n      index[i] = btn.getNativeElement().offsetWidth;\r\n      total += index[i];\r\n    });\r\n\r\n    this.segmentButtonWidths = index;\r\n    this.segmentWidth = total;\r\n  }\r\n}\r\n"]}